name: serve
description: serves the application
inputs:
  appDir:
    dir:
      default: .
run:
  container:
    image: { ref: 'nginx:1.15' }
    files:
      { '/etc/nginx/nginx.conf' }
    dirs: { '/app': $(appDir) }
    cmd:
      - sh
      - -ce
      - |
        ls -la /etc/nginx/nginx.conf
        echo 'cat nginx configuration (START)'
        cat /etc/nginx/nginx.conf
        echo 'cat nginx configuration (DONE)'
        echo 'running nginx'
        nginx -g 'daemon off;'
    workDir: '/app'
